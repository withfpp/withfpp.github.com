<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>자바스크립트 기본 - javascript basic |  codeJS</title>
    <meta name="description" content="My development blog, I love Javascript">
    <meta name="author" content="Leon Taeho Kim">
    <meta name="keywords" content="javascript,css3,html5,angularJS" />
    <meta name="generator" content="haroopress v0.9.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="codeJS" type="application/rss+xml">

    <!-- Le styles -->
    <link rel="canonical" href="http://withfpp.github.com">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/default.css" rel="stylesheet">
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon-64.png">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.jsonp.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/apps/github.js"></script>
    <script src="/js/apps/twitter.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

        <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <a class="pull-right" href="/rss.xml"><span class="icon-rss"></span></a>
          

          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/archives">Archives</a>
              </li>
              <li>
                <a href="/slides">Slides</a>
              </li>
                
            </ul>
          </div>
        </div>
      </div>
    </div>

    
<link href="/css/code/default.css" rel="stylesheet">
<div class="container page-archive">
    <div class="row">
        <div class="span3">
            <div id="author" class="well">
                <div>
                    <h3>About Author</h3>
                    <ul class="thumbnails">
                        <li>
                            <a class="thumbnail">
                                <img src="http://www.gravatar.com/avatar/36d40806a586b8ebc0970c759e6ffec4?r=pg&amp;s=128.jpg&amp;d=identicon" />
                            </a>
                        </li>
                    </ul>
                    <p>
                        <strong>Leon Taeho Kim</strong><br/>
                        blog: <a href="http://withfpp.github.io" target="_blank">http://withfpp.github.io</a><br/>
                        twitter: <a href="http://twitter.com/" target="_blank">@</a><br/>
                        github: <a href="https://github.com/https://github.com/withfpp" target="_blank">https://github.com/withfpp</a>
                    </p>
                    <p>
                        <a href="https://twitter.com/" class="twitter-follow-button" data-show-count="true">Follow @</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </p>
                    <p>
                        <p>자바스크립트를 신나게 즐깁니다.</p>
<ul>
<li>음악도 즐기고</li>
<li>여행도 즐기고</li>
<li>사람도 즐기고</li>
</ul>

                    </p>
                </div>
                <div>
                    <h3>About this Article</h3>
                    <p>
                        <h5>Date Released:</h5>
                        <span>Saturday, August 2 2014 10:14 PM</span>
                    </p>
                </div>
            </div>
                        <div class="well">
                <ul class="nav nav-list">
                    <li class="nav-header">Categories</li>
                    <li class=""><a href="/category"><i class="icon-home"></i> Home</a></li>
                    
                    <li><a href="/category/css"><i class="icon-book"></i> css</a></li>
                    
                    <li><a href="/category/js"><i class="icon-book"></i> js</a></li>
                    
                </ul>
            </div>

            
<div class="well">
    <ul class="nav nav-list">
        <li class="nav-header">Recent Articles</li>
    
        <li>
            <a href="/post/front-end-js-sangsig" target="_blank">Front-end JS 상식
            <span class="label">Leon Taeho Kim</span></a>
        </li>
    
        <li>
            <a href="/post/jabaseukeuribteu-api-dijain" target="_blank">실용적인 Javascript
            <span class="label">Leon Taeho Kim</span></a>
        </li>
    
        <li>
            <a href="/post/css-haegsim1-css-essential-1)" target="_blank">CSS 핵심1 ( CSS essential 1)
            <span class="label">Leon Taeho Kim</span></a>
        </li>
    
        <li>
            <a href="/post/jabaseukeuribteu-neombeo-javascript-number)" target="_blank">자바스크립트 기본 - javascript basic
            <span class="label">Leon Taeho Kim</span></a>
        </li>
    
        <li>
            <a href="/post/welcome-to-haroopress" target="_blank">Welcome to haroopress
            <span class="label">haroopress</span></a>
        </li>
    
    </ul>
</div>

        </div>
        <div class="span9">
            <div class="row">
                <div class="span9">
                    <div class="well bg">
                        
                        <div class="page-header">
                            <h1>자바스크립트 기본 - javascript basic</h1>
                        </div>

                        <div class="pull-right social-area">
                                                
                                                

                            
                        </div>

                        <div class="markdown-wrapper">
                            <p>Javascript 배우기 좋은 소스들</p>
<ul>
<li><a href="http://www.w3schools.com/js/">http://www.w3schools.com/js/</a></li>
<li><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript">https://developer.mozilla.org/ko/docs/Web/JavaScript</a></li>
<li><a href="http://bonsaiden.github.io/JavaScript-Garden/ko/">http://bonsaiden.github.io/JavaScript-Garden/ko/</a></li>
<li><a href="http://pineapple.io/resources/tagged/javascript?sort=most_favorited">http://pineapple.io/resources/tagged/javascript?sort=most_favorited</a></li>
</ul>
<p>자바스크립트를 큰 그림으로 한 번에 볼 수 있도록 정리해보고 싶었다. 위를 비롯해 여러가지 소스를 활용해 포스팅한다. 계속 업데이트 에정...</p>
<h3 id="toc_34">탄탄한 기초를 위하여</h3>

<h5 id="toc_35">1.프로토타입 이용하기</h5>
<p>프로토타입을 이용해서 메소드를 확장한다.</p>
<ul>
<li>prototype, String, for</li>
</ul>
<pre><code class="js">var s = <span class="string">'I am leon'</span>;
<span class="transposed_variable">String.</span><span class="transposed_variable">prototype.</span>reversed = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    var r = <span class="string">''</span>;
    <span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="transposed_variable">this.</span><span class="built_in">length</span> -<span class="number">1</span>; <span class="built_in">i</span> &gt;= <span class="number">0</span> ; <span class="built_in">i</span>--)<span class="cell">{
        r += this[i];    
    }</span>
    <span class="keyword">return</span> r;
}
s = <span class="transposed_variable">s.</span>reversed();
alert(s);
</code></pre>
<h5 id="toc_36">2.내장함수 이용하기</h5>
<p>자바스크립트는 함수 안에 함수를 허용한다. 전역환경에 너무 많은 함수를 보관하지 않을 수 있어 유지면에서 깔끔하다. 내장함수는 부모함수의 변수들을 공유한다.</p>
<ul>
<li>parseInt()</li>
</ul>
<pre><code class="js"><span class="keyword">var</span> outer = <span class="function"><span class="keyword">function</span> <span class="params">(arg)</span> {</span>
    <span class="keyword">var</span> a = parseInt(arg,<span class="number">10</span>);
    <span class="keyword">var</span> inner = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> a + <span class="number">10</span>;
    };
    <span class="keyword">return</span> inner();
};
alert(outer(<span class="number">10</span>));
</code></pre>
<h5 id="toc_37">3.클로저 1</h5>
<p>클로저는 함수와 함수에 의해 생겨진 범위객체를 지칭하는 말이다.</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span><span class="params">(a)</span>{</span>
    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(b)</span>{</span>
        <span class="keyword">return</span> a + b;   
    }
}
<span class="keyword">var</span> x = makeAdder(<span class="number">5</span>);
alert(x(<span class="number">10</span>));
</code></pre><p>makeAdder가 호출되면, 범위 객체는 makeAdder 함수에 매개변수로 남아있는 속성 a 를 가진 상태로 생성된다. 일반적으로 Javascript의 가비지 컬렉터가 이 때 makeAdder에 의해 생성된 범위 객체를 청소해야하지만, 리턴되는 함수가 여전히 범위 객체를 참조하고 있다. 즉, 안쪽 함수는 바깥쪽의 a를 계속 지켜보고 있다.</p><p>결과적으로 범위 객체는 makeAdder에 의해 리턴된 함수가 더는 참조되지 않을 때까지 가비지 컬렉터에 의해 정리되지 않게 된다.</p>
<h5 id="toc_38">4.기존의 클래스에 새 메소드 추가하기</h5>
<p>프로토타입을 이용한다.</p><pre><code class="js"><span class="comment">//클래스를 만든다.</span>
<span class="function"><span class="keyword">function</span> <span class="title">Dog</span><span class="params">(name,age)</span>{</span>
    <span class="transposed_variable">this.</span>name = name;
    <span class="transposed_variable">this.</span>age = age;
}

<span class="comment">//클래스에 메소드를 추가한다.</span>
<span class="transposed_variable">Dog.</span><span class="transposed_variable">prototype.</span>bark = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    alert(<span class="string">'Hi, I am '</span> + <span class="transposed_variable">this.</span>name);   
};

<span class="comment">//새로운 인스턴스 만들어 새 메소드 이용한다.</span>
var king = new Dog(<span class="string">'king'</span>,<span class="number">10</span>);
<span class="transposed_variable">king.</span>bark();
</code></pre>
<h5 id="toc_39">5.상속</h5>
<p>자바스크립트는 프로토타입 체인을 이용해서 다중 상속을 진행한다. </p><pre><code class="js"><span class="comment">//최상위 artist 클래스</span>
<span class="function"><span class="keyword">function</span> <span class="title">Artist</span> <span class="params">(name,age)</span>{</span>
    <span class="transposed_variable">this.</span>name = name || <span class="string">"john doe"</span>;
    <span class="transposed_variable">this.</span>age = age || <span class="number">10</span>;
    <span class="transposed_variable">this.</span>msg = <span class="string">"I am an artist."</span>;
}

<span class="function"><span class="keyword">function</span> <span class="title">Musician</span><span class="params">(name)</span>{</span>
    <span class="transposed_variable">this.</span>name = name || <span class="string">"john doe"</span>;   
}

<span class="function"><span class="keyword">function</span> <span class="title">Drummer</span><span class="params">(name)</span>{</span>
    <span class="transposed_variable">this.</span>name = name || <span class="string">"john doe"</span>;   
}

<span class="comment">// 프로토타입 체인 설정을 시작한다.</span>
<span class="comment">// 뮤지션은 아티스트이다. 아티스트를 상속받는다.</span>
<span class="transposed_variable">Musician.</span>prototype = new Artist();
<span class="comment">// 드러머는 뮤지션이다. 뮤지션을 상속받는다.</span>
<span class="transposed_variable">Drummer.</span>prototype = new Musician();

<span class="comment">//드러머를 만들어 아티스트 메시지를 확인하자.</span>
var drummerKim = new Drummer();

<span class="comment">//새로 만든 드러머가 아티스트 메시지를 사용하려 한다. 우리의 드러머가 아티스트라는 것을 확인한다.</span>
alert(<span class="transposed_variable">drummerKim.</span>msg);

<span class="comment">//새로운 이름도 설정해보자.</span>
alert(<span class="transposed_variable">drummerKim.</span>name);
<span class="transposed_variable">drummerKim.</span>name = <span class="string">'kim'</span>;
alert(<span class="transposed_variable">drummerKim.</span>name);

</code></pre>
<h5 id="toc_40">6.hasOwnProperty</h5>
<p>어떤 객체의 프로퍼티가 자신의 프로퍼티인지 혹은 프로토타입 체인에 있는 것인지 확인하려면 hasOwnProperty 메소드를 사용한다. 이 메소드는 모든 객체가 가지고 있다.</p><pre><code class="js"><span class="title">alert</span>(<span class="type">String</span>.hasOwnProperty('length'));

<span class="title">var</span> foo = {
    name: <span class="string">"leon"</span>,
    age: <span class="number">10</span>
}

<span class="title">alert</span>(foo.hasOwnProperty('name'));
</code></pre><p>for in 문에서 속성을 나열해줄때 프로토타입으로 상속받은 속성들까지 나타나게 된다. 그래서 우리는 hasOwnProperty로 필터링을 할 수 있다.</p><pre><code class="js"><span class="comment">// Object.prototype을 오염시킨다.</span>
Object.prototype.bar = <span class="string">'헤헤헤'</span>;

<span class="keyword">var</span> foo = {moo: <span class="string">'무무무'</span>};
<span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> foo) {
    cosnole.log(i); <span class="comment">// bar와 moo 둘 다 출력한다.</span>
}

<span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> foo){
    <span class="keyword">if</span>(foo.hasOwnProperty(i)){
        alert(<span class="string">'이제는 bar가 없어요 이것만 있어요 :'</span> + i);   
    }
}
</code></pre>
<h5 id="toc_41">7. 자바스크립트의 함수</h5>
<p>함수 선언과 함수 표현식 으로 불리는 두 가지 표현법이 있다.</p><p>함수 선언</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span>{</span>}
</code></pre><p>함수 표현식</p><pre><code class="js">foo;    <span class="comment">//undefined</span>
foo();      <span class="comment">//TypeError</span>
<span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>};
<span class="comment">//foo 변수에 익명 함수 할당</span>
</code></pre><p>위의 예제처럼 var 문을 통해 선언하는 경우, 코드가 실행되기 전에 foo 라는 이름의 변수를 스코프의 맨 위로 올리게 된다(호이스팅). 이 때 foo 값은 undefined 로 정의 된다.</p><p>변수에 값을 할당하는 일은 런타임 상황에서 이루어지게 되므로 실제 코드가 실행되는 순간의 foo 변수는 기본값인 undefined 이다.</p>
<h5 id="toc_42">8. this 함정</h5>
<p>this가 글로벌 객체를 가리키는 잘못된 설계가 등장할 경우가 있다.</p><pre><code class="js"><span class="transposed_variable">Foo.</span>method = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>{</span>
        <span class="comment">//여기에서 this는 글로벌 객체를 가리킨다.    </span>
    }
    test();
}
</code></pre><p>test 에서 this가 Foo 를 가리킬 것으로 생각하지만 그렇지 않다.</p><p>test 에서 Foo 에 접근하려면 method에 local 변수를 하나 만들어서 Foo 를 가리키게 해야 한다.</p><pre><code class="js">Foo.method = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> that = <span class="keyword">this</span>;
    <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>{</span>
        <span class="comment">// this 대신 that을 사용하여 Foo를 가리키게 한다.</span>
    }
    test();
}
</code></pre>
<h5 id="toc_43">9. 클로저와 레퍼런스</h5>
<p>클로저를 이용해서 private 변수를 만들어보자.</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span><span class="params">(start)</span>{</span>
    <span class="keyword">var</span> count = start;
    <span class="keyword">return</span> {
        increment: <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
             count++;   
        },

        <span class="keyword">get</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
             <span class="keyword">return</span> count;   
        }
    }
}
<span class="keyword">var</span> foo = Counter(<span class="number">10</span>);
foo.increment();
<span class="keyword">var</span> a = foo.<span class="keyword">get</span>();
console.log(a);     <span class="comment">//11</span>
</code></pre><p>여기서 Counter 는 increment 클로저와 get 클로저 두 개를 반환한다. 이 두 클로저는 Counter 함수 스코프에 대한 참조를 유지하고 있기 때문에 이 함수 스코프에 있는 count 변수에 계속 접근이 가능하다.</p><p>자바스크립트에서는 스코프를 어딘가에 할당해두거나 참조할 수 없다. 그러므로 스코프 밖에서는 직접 count 에 접근이 불가능하다. 스코프 안에 정의된 클로저를 이용하여 접근할 수 밖에 없다.</p><pre><code class="js">
foo.hack = <span class="keyword">function</span>(){
    count = <span class="number">20000</span>;
}
foo.hack(); //그래도 Counter 함수 안의 count는 그대로<span class="keyword">...</span>

</code></pre><p>이 코드에서 foo.hack 함수는 Counter 안에서 정의 되지 않았기 때문에 함수가 실행되더라도 Counter 함수 스코프 안에 있는 count 값은 변하지 않는다. 대신 foo.hack 함수의 count는 Global 환경의 스코프에 생성되거나 이미 만들어지는 변수를 덮어 쓸 것이다.</p>
<h6 id="toc_44">반복문에서 클로저 사용하기</h6>
<p>자바스크립트 반복문에서 볼 수 있는 대표적인 함정 중 하나이다. 오류는 인덱스 변수를 복사할 때 발생하게 된다.</p><pre><code class="js"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++){
    setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        console.log(i);
    },<span class="number">1000</span>);
}
</code></pre><p>위 코드는 0부터 9까지 수를 출력하지 않는다.</p><p>타이머에 설정된 익명 함수는 변수 i에 대한 참조를 갖고 있다가 console.log가 호출되는 시점에 i의 값을 사용한다. console.log가 호출되는 시점에서 for loop는 이미 끝난 상황이기 때문에 i 는 10이 된다.</p><p>우리의 목적을 이루려면 i 값을 복사 해 놓아야 한다.</p><p>반복문의 index 값을 복사하는 가장 좋은 방법은 익명함수로 감싸는 방법이다.(랩핑, Anonymous Wrapper)</p><pre><code class="js"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++){
    (<span class="function"><span class="keyword">function</span><span class="params">(e)</span> {</span>
    setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        console.log(e);
    },<span class="number">1000</span>);
    })(i);
}
</code></pre><p>이 익명함수에 *** i *** 를 인자로 넘기면 이 함수의 파라미터 e에 i의 값이 복사되어 넘어갈 것이다.</p><p>그리고 setTimeout은 익명 함수의 파라미터인 e에 대한 참조를 갖게 되고 e값은 복사되어 넘어왔으므로 loop의 상태에 따라서 변화하지 않는다.</p>
<h5 id="toc_45">10.arguments 객체</h5>
<p>자바스크립트의 모든 함수 스코프에는 arguments 라는 특별한 변수가 있다. 이 변수는 함수에 넘겨진 모든 인자에 대한 정보가 담겨져 있다.</p><p>arguments 객체는 Array가 아니다. 물론 length 프로퍼티도 있고 여러모로 Array와 비슷하게 생겼지만 Array.prototype을 상속 받지는 않았다. </p><p>그래서 arguments 에는 push, pop, slice 같은 표준 메소드가 없다. 일반 for 문을 이용해 순회는 할 수 있지만, Array의 메소드를 이용하려면 arguments 를 Array로 변환해야 한다.</p><pre><code class="js">var text = function()<span class="tuple">{
    console.<span class="function_name">log</span>(arguments);
}</span>;

<span class="function"><span class="title">text</span><span class="params">(<span class="string">"hello"</span>)</span>;
<span class="title">text</span><span class="params">(typeof <span class="string">"hello"</span>)</span>;
<span class="title">text</span><span class="params">(<span class="number">1000</span>)</span>;
<span class="title">text</span><span class="params">(typeof <span class="number">1000</span>)</span>;
<span class="title">text</span><span class="params">(<span class="string">"hello"</span>, <span class="number">1000</span>)</span>;
</span></code></pre><p>파라미터를 지정해주지 않았지만, arguments 가 모든 것을 이해했다. 성능에 관한 자세한 고찰은 <a href="http://bonsaiden.github.io/JavaScript-Garden/ko/">http://bonsaiden.github.io/JavaScript-Garden/ko/</a> 을 참조한다.</p>
<h5 id="toc_46">11.Constructor / 생성자</h5>
<p>자바스크립트는 new 키워드로 호출되는 함수가 생성자가 된다.</p><p>생성자로 호출된 함수의 this 객체는 새로 생성된 객체를 가리키고, 새로 만든 객체의 prototype에는 생성자의 prototype 이 할당된다.</p><p>그리고 생성자에 명시적인 return 구문이 없으면 this가 가리키는 객체를 자동으로 반환한다.</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Car</span><span class="params">()</span><span class="comment">{
    return "car";   
}</span>

<span class="title">var</span> <span class="title">car</span> = <span class="title">new</span> <span class="title">Car</span><span class="params">()</span>;</span>    <span class="comment">//새 객체 만들어 반환</span>
console.log(car);    

<span class="function"><span class="keyword">function</span> <span class="title">Ship</span><span class="params">()</span><span class="comment">{
    this.value = "ship";

    return {
        ship: 3
    }</span>
}

<span class="title">var</span> <span class="title">ship</span> = <span class="title">new</span> <span class="title">Ship</span><span class="params">()</span>;</span>    <span class="comment">//리턴으로 명시한 객체 반환</span>
console.log(ship);
</code></pre><p>new 키워드가 없으면 그 함수는 객체를 리턴하지 않는다.</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Car</span><span class="params">()</span><span class="comment">{
    this.value = "car";   
}</span>
<span class="title">console</span>.<span class="title">log</span><span class="params">(Car()</span>);</span>    <span class="comment">//undefined</span>
</code></pre><p>위의 예제는 상황에 따라 다르게 동작한다. this 객체의 동작원리에 따라서 Car 함수안의 this의 값은 글로벌 객체를 가리키게 된다.</p><p>결국, new 키워드를 빼고 코드를 작성하면 예상하지 못한 this 참조 오류가 발생할 수 있다.</p>
<h6 id="toc_47">Factory / 팩토리</h6>
<p>생성자가 객체를 리턴하면 new 키워드를 생략 할 수 있다.</p><pre><code class="js"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> value = {name: <span class="string">'teo'</span>};
    <span class="keyword">return</span> {
        method: <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
            <span class="keyword">return</span> value;   
        }
    }
}

Bar.prototype = {
    foo: <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>}   
};

<span class="keyword">new</span> Bar();
Bar();

</code></pre><p>new 키워드의 유무와 관계 없이 Bar 생성자의 동작은 동일하다. 즉, 클로저가 할당된 method 프로퍼티가 있는 새로운 객체를 만들어 반환한다. 이번에는 명시적으로 return 문이 들어가 있었기 때문이다.</p><p>생성자에 객체를 만들어서 명시적으로 반환하면 new 키워드에 관계없이 잘 동작하는 생성자를 만들 수 있다. new 키워드가 빠졌을 때 발생하는 this 참조 오류를 방어해준다.</p>
<h5 id="toc_48">12.스코프와 네임스페이스</h5>
<p>자바스크립트는 block scope/블록 스코프 를 지원하지 않는다. 그래서 자바스크립트에서는 항상 function scope/함수 스코프 를 사용한다.</p><p>그리고 자바스크립트에는 네임스페이스의 개념이 없다. 모든 값이 하나의 전역 스코프에 정의 된다.</p><p>변수를 참조 할 때마다 자바스크립트는 해당 변수를 찾을 때까지 상위 방향으로 스코프를 탐색한다. 전역 스코프에서도 찾지 못했을 경우 ReferenceError를 발생 시킨다.</p>
<h6 id="toc_49">전역 변수 문제</h6>
<p>var 를 선언하지 않으면 전역 변수로 인식 된다.</p><pre><code class="js"><span class="comment">//글로벌 스코프</span>
<span class="keyword">var</span> foo = <span class="number">20000</span>;
console.log(foo);    <span class="comment">//20000;</span>
<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span><span class="comment">{
    //로컬 스코프     
    foo = 10;
}</span>
<span class="title">test</span><span class="params">()</span>;</span>
console.log(foo);    <span class="comment">//10;</span>
</code></pre><p>test 함수 안에서 foo 앞에 var 가 빠져있다. 그래서 로컬 스코프가 아닌 글로벌 스코프의 foo 값을 바꿔 버렸다. 전역변수를 잘못 건드릴 경우 코드 전체에 혼란을 야기한다.</p><p>의도적으로 외부 스코프의 변수를 사용하는 것이 아니라면 var 를 꼭 넣어야 한다.</p>
<h6 id="toc_50">Hoisting/호이스팅</h6>
<p>자바스크립트는 선언문을 모두 호이스트 한다. 호이스트는 var 구문이나 function 선언문을 해당 스코프의 맨 위로 끌어올리는 것을 말한다.</p><pre><code class="js"><span class="function"><span class="title">bar</span><span class="params">()</span>;
<span class="title">var</span> <span class="title">bar</span> = <span class="title">function</span><span class="params">()</span>{ <span class="title">console</span>.<span class="title">log</span><span class="params">('hi, bar')</span>; };
<span class="title">var</span> <span class="title">someValue</span> = 20000;

<span class="title">test</span><span class="params">()</span>;
<span class="title">function</span> <span class="title">test</span><span class="params">(list)</span>{
    <span class="title">if</span><span class="params">(false)</span>{
        <span class="title">goo</span> = 1;   
    }<span class="title">else</span>{
        <span class="title">var</span> <span class="title">goo</span> = 2;   
    }
    <span class="title">for</span><span class="params">(var i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span>{
        <span class="title">var</span> <span class="title">e</span> = <span class="title">list</span>[<span class="title">i</span>];   
    }
}
</span></code></pre><p>코드가 실행되면 아래와 같이 바뀐다.</p><pre><code class="js"><span class="comment">// var 구문이 맨 위로 옮겨진다.</span>
var bar, someValue;

<span class="comment">// function 선언문도 위로 옮겨진다.</span>
<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(list)</span>{</span>
    var goo, i, e; <span class="comment">// 함수 지역 변수들이 모두 위로 옮겨진다.</span>
    <span class="keyword">if</span>(false){
        goo = <span class="number">1</span>;   
    }<span class="keyword">else</span>{
        goo = <span class="number">2</span>;   
    }
    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++){
        e = <span class="built_in">list</span><span class="matrix">[i]</span>;   
    }
}

bar();    <span class="comment">//'undefined' 이기 때문에 타입 오류</span>
someValue = <span class="number">2000</span>;    <span class="comment">// Hoisting은 할당문은 그대로 둔다.</span>
bar = <span class="function"><span class="keyword">function</span><span class="params">()</span>{ <span class="title">console</span>.<span class="title">log</span><span class="params">('hi, bar')</span>; };</span>
test();
</code></pre><p>원래 코드에서 if블럭은 전역 변수 goo 를 바꿔야 했는데, 호이스팅 후에는 지역 변수를 바꾸게 된다. </p><p>다음 코드는 ReferenceError가 나지 않는다. 호이스팅 때문이다.</p><pre><code class="js"><span class="function"><span class="title">if</span> <span class="params">(!something)</span>{
    <span class="title">var</span> <span class="title">something</span> = {};
}
</span></code></pre><p>var 구문은 전역 스코프의 맨 위로 이동하기 때문에 이 코드는 문제가 없다.</p><pre><code class="js">var something;

// 이미 something 은 선언 되어 있다.
<span class="function"><span class="title">if</span> <span class="params">(!something)</span>{
    <span class="title">something</span> = {};
}
</span></code></pre>
<h5 id="toc_51">13. 배열</h5>
<p>배열도 객체이지만 객체 순회를 위해서 for in을 사용하는 것은 바람직하지 않다. 프로토타입 체인에 있는 프로퍼티를 모두 훑어가기 때문에 느리다. 게다가 hasOwnProperty 를 사용하면 for보다 20배 느리다.</p><p>배열을 순회 할 때에는 for 문 사용이 가장 빠르다.</p><pre><code class="js">var list = <span class="matrix">[]</span>;
<span class="keyword">for</span>(var <span class="built_in">i</span> =<span class="number">0</span>; <span class="built_in">i</span> &lt; <span class="number">100</span>; <span class="built_in">i</span>++)<span class="cell">{
    list[list.length] = "list" + i;
    //list.push("list"+i);    
}</span>
<span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="number">0</span>, l = <span class="transposed_variable">list.</span><span class="built_in">length</span>; <span class="built_in">i</span> &lt; l; <span class="built_in">i</span>++)<span class="cell">{
    console.log(list[i]);   
}</span>
</code></pre><p>위의 코드에서 l = list.length 로 배열의 length 값을 캐시해야 하는 것은 매우 중요하다. 매 반복시마다 length 프로퍼티에 접근하는 것은 바람직하지 않으며, 실제로 캐시하지 않으면 성능이 느려진다.</p>
<h6 id="toc_52">length 프로퍼티</h6>
<p>length의 getter 는 엘리먼트 개수를 반환하고 setter 는 할당한 수 만큼을 남기고 잘라버린다.</p><pre><code class="js">var <span class="built_in">list</span> = <span class="matrix">[]</span>;
<span class="keyword">for</span>(var i=<span class="number">0</span>; i&lt;<span class="number">10</span>;i++){
    <span class="transposed_variable">list.</span>push(<span class="string">"list"</span> + i);
}
<span class="transposed_variable">console.</span>log(<span class="transposed_variable">list.</span><span class="built_in">length</span>);   <span class="comment">//10</span>
<span class="transposed_variable">list.</span><span class="built_in">length</span> = <span class="number">5</span>;
<span class="transposed_variable">console.</span>log(<span class="transposed_variable">list.</span><span class="built_in">length</span>);   <span class="comment">//5</span>
<span class="transposed_variable">console.</span>log(<span class="built_in">list</span>);
</code></pre>
<h6 id="toc_53">최적의 성능 : for 문을 사용, length 프로퍼티 캐시 할 것</h6>

<h5 id="toc_54">14.타입 변환</h5>

<h6 id="toc_55">스트링으로 변환</h6>
<pre><code class="js"><span class="xml"><span class="tag">'' + <span class="attribute">100</span> =<span class="value">==</span> '<span class="attribute">100</span>'; //<span class="attribute">true</span> 
</span></span></code></pre><p>숫자 + 빈 스트링 = 스트링</p>
<h6 id="toc_56">숫자로 변환</h6>
<pre><code class="js"><span class="xml"><span class="tag">+'<span class="attribute">10</span>' =<span class="value">==</span> <span class="attribute">10</span>;   //<span class="attribute">true</span>

</span></span></code></pre><p>// + 연산자만 붙여주면 스트링을 숫자로 변환</p>
                        </div>
                        <hr />
                                            
                        <div class="row-fluid">
                            
                            <div class="pull-right">
                                <a href="/post/welcome-to-haroopress" class="btn btn-info">Welcome to haroopress <i class="icon-white icon-chevron-right"></i></a>
                            </div>
                            

                            
                            <div class="pull-left">
                                <a href="/post/jabaseukeuribteu-api-dijain" class="btn btn-info"><i class="icon-white icon-chevron-left"></i> 실용적인 Javascript</a>
                            </div>
                            
                        </div>
                    

                        
                    </div>
                </div>
            </div>
            <div class="row">
            </div>
        </div>
    </div>
    <!--<div class="row">-->
        <!--<div class="offset3 span9">-->
            <!--<strong>tags</strong> :-->
            <!---->
            <!--<a href="/tag/javascript">javascript</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/js">js</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/basic">basic</a>&nbsp;-->
            <!---->
        <!--</div>-->
    <!--</div>-->
</div><!-- /container -->


        <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="span12 ">
                    <div class="well">
                        <p class="pull-right"><a href="#">Back to top</a></p>
                            <strong>haroopress</strong> developed by <a href="http://twitter.com/rhiokim" target="_blank">@rhiokim</a>,<a href="http://twitter.com/haroopress" target="_blank">@haroopress</a> and source in <a href="https://github.com/rhiokim/haroopress" target="_blank">github</a><br/>
                            Designed and built with all the love in the world <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.<br />
                            Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
                    </div>
                </div>
            </div>
        </div>
    </footer>

    


</body>
</html>
